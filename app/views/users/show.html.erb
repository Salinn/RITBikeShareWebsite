<% provide(:title, 'Account') %>
<h1>Your Bike Share Account</h1>
<h3 style="text-align: center;">There are currently <%= number_of_bikes_left %> that can be checked out</h3>
<% user = @accessible[:user]%>
<% checked_out=@accessible[:check_out]%>
<% transactions = @accessible[:transaction]%>

<p>
  <strong>Total number of bikes rented:</strong>
  <%= user.checked_out.size %>
</p>

<% if checked_out != "No" %>
    <p>
      <strong>Do I have a bike Checked out?  </strong>
      <%= "Yes" %>
    </p>

    <p>
      <strong>Bike currently being rented is due back in</strong>
      <%= checked_out.checkout_time.strftime("%I:%M %p") %>
    </p>
<% else %>
    <p>
      <strong>Bike currently being rented is?</strong>
      <%= checked_out %>
    </p>
<% end %>

<h3 style="text-align: center;">Charges to account</h3>

<table>
  <thead>
  <tr>
    <th>Date of charge_____</th>
    <th>Charge amount_____</th>
    <th>Description of charge_________</th>
    <th>Pending</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
  <% transactions.each do |transaction| %>
      <tr>
        <td><%= transaction.date_of_charge %></td>
        <td><%= transaction.charge_amount %></td>
        <td><%= transaction.description_of_charge %></td>
        <% if transaction.pending? %>
            <td><%= "Pending" %></td>
        <% end %>
      </tr>
  <% end %>
  </tbody>
</table>